# SQS → Kafka 마이그레이션 개요

## 배경
- 현재 플랫폼은 도메인 이벤트를 AWS SQS 큐로 발행하고 있으며, 핵심 업무 흐름이 AWS 매니지드 메시징에 강하게 종속되어 있습니다.
- Kafka를 도입하면 멀티 클라우드 이식성, 분석을 위한 이벤트 로그 리플레이, 처리량·보존 정책에 대한 세밀한 제어가 가능해집니다.
- 마이그레이션은 다운스트림 소비자를 방해하지 않으면서 점진적으로 Kafka를 도입하고, 운영 중인 SLA를 유지해야 합니다.

## 마이그레이션 목표
- 신규·기존 이벤트 스트림을 Kafka 클러스터로 유입시켜 AWS 특화 메시징 의존성을 완화합니다.
- 전환 기간 동안 데이터 손실, 중복 처리, 다운타임 없이 기능적 동등성을 유지합니다.
- 향후 전송 수단 변경(예: Pulsar, 온프렘 클러스터)에 대한 대응력을 높이기 위해 재사용 가능한 메시징 인터페이스를 구축합니다.

## 성공 지표
- 비즈니스 핵심 이벤트의 100%가 Kafka 토픽에 안전하게 적재되고, 다운스트림 서비스에서 소비됩니다.
- 전환 이후 종단 간 지연과 처리량이 기존 SQS 기준 SLA를 충족하거나 개선됩니다.
- 운영팀이 외부 지원 없이 Kafka 클러스터 상태, 파티션, 스키마 진화 등을 관리할 수 있습니다.
- 마이그레이션 런북을 활용해 몇 분 이내에 SQS 전용 모드로 안전하게 롤백할 수 있습니다.

## 제약 및 가정
- 현재 메시지 스키마는 JSON이며, 멱등성은 애플리케이션 로직에서 처리합니다.
- 소비자는 스프링 기반 마이크로서비스로 Kubernetes에 배포되고, 컨테이너 이미지에는 SQS/Kafka 클라이언트가 모두 포함될 수 있습니다.
- Kafka 인프라(자가 구축 또는 MSK)는 전환 전에 운영 등급의 관측성과 접근 제어를 갖춘 상태로 준비됩니다.
- 모든 프로듀서/컨슈머 런타임에서 VPC 피어링 또는 프라이빗 링크를 통해 Kafka 브로커에 접근 가능합니다.

## 문서 구성
1. `02-sqs-kafka-comparison.md` — 전달 보장 및 운영 차이 비교.
2. `03-architecture.md` — 목표 아키텍처, 듀얼 라이트 전략, 브리지 워커 설계.
3. `04-migration-phases.md` — 단계별 전환 일정.
4. `05-application-adaptation.md` — 프로듀서·컨슈머 변경 사항과 회복탄력성 패턴.
5. `06-data-schema.md` — 페이로드 계약, 보존 정책, 백필 전략.
6. `07-testing-validation.md` — 전환 전후 검증 전략.
7. `08-operations.md` — 관측성, 보안, 운영 절차.
8. `09-risk-mitigation.md` — 리스크와 대응책.
9. `10-sample-implementation.md` — 메시징 추상화 참고 코드.
