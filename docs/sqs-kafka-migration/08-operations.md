# 운영 및 런북

## 모니터링
- Prometheus 또는 CloudWatch(MSK)를 통해 브로커 지표(CPU, 디스크, 네트워크), 토픽별 처리량, 컨슈머 lag을 수집합니다.
- Grafana 대시보드에 듀얼 라이트 불일치 지표를 포함한 핵심 현황을 시각화합니다.
- 브로커 가용성, ISR 감소, 비정상 리더 선출, lag 임계치 등에 대한 알림을 설정합니다.

## 보안
- 모든 클라이언트-브로커 통신에 TLS를 적용하고 인증서를 주기적으로 교체합니다.
- SASL/SCRAM 또는 IAM 인증을 사용하고, 서비스별 최소 권한 ACL을 적용합니다.
- 접근 로그를 감사하고 IAM 정책과 대조해 비인가 사용을 탐지합니다.

## 정기 운영 작업
- 파티션 리밸런스, 브로커 롤링 리스타트, 토픽 설정 변경에 대한 표준 작업 절차(SOP)를 정의합니다.
- 스토리지 사용량과 파티션 수를 평가하는 정기 용량 리뷰를 수행합니다.
- 토픽 생성, ACL 관리, 스키마 생명주기를 Terraform 또는 스크립트로 자동화합니다.

## 사고 대응
- 브로커 장애, lag 급증, 스키마 비호환, DLQ 폭증에 대비한 온콜 플레이북을 유지합니다.
- 컨슈머 일시 중지, DLQ 재생, 클러스터 확장에 필요한 커맨드를 빠르게 참조할 수 있도록 정리합니다.
- 비난 없는 사후 분석을 진행하고 학습 내용을 런북에 반영합니다.
