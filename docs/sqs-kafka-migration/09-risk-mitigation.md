# 리스크 관리

## 주요 리스크와 대응책
- **중복 처리**: 멱등 처리가 완료된 후에만 오프셋을 커밋하고 처리한 이벤트 ID를 저장합니다.
- **순서 붕괴**: 파티션 키 설계를 시뮬레이션으로 검증하고, 편향 발생 시 리밸런스 또는 파티션 증설을 수행합니다.
- **Kafka 용량 부족**: 부하 테스트를 사전에 진행하며, 절체 전까지 버퍼 용량을 확보하거나 오토스케일을 구성합니다.
- **운영 숙련도 부족**: 교육, 전문가 섀도잉, 단계적 롤아웃으로 팀 역량을 강화합니다.
- **듀얼 라이트 기간 장기화**: 명확한 종료 기준과 주간 리뷰로 중복 기간을 최소화합니다.
- **보안 설정 오류**: IaC 자동화, 정기 감사, 브로커 엔드포인트 침투 테스트를 통해 위험을 줄입니다.
- **롤백 실패**: Kafka 안정성 확보 전까지 기능 플래그와 SQS 경로를 유지하고, 롤백 모의훈련을 반복합니다.

## 결정 로그
- 팀 역량과 컴플라이언스 제약을 고려해 MSK와 자가 운영 중 어느 방식을 택할지 결정합니다.
- 페이로드 진화를 지원하기 위해 Schema Registry를 도입하고 하위 호환을 강제합니다.
- 실제 사고에서 Kafka DLQ 재생 파이프라인이 동등 성능을 보일 때까지 SQS DLQ를 유지합니다.
