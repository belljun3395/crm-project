#!/bin/sh

set -e

echo "ğŸš€ Starting Kubernetes deployment..."

ORIGINAL_DIR=$(pwd)
echo "ğŸ“Executing the script in the directory: $ORIGINAL_DIR"

echo "ğŸ“‚ Changing directory to application manifests..."
cd ../k8s/application

echo "ğŸ—‘ Deleting existing application resources..."
kubectl delete -f . || echo "âš ï¸  Warning: Some resources might not exist."

echo "ğŸ“¦ Applying new application manifests..."
kubectl apply -f .

echo "âœ… Application resources updated successfully."

echo "ğŸ”™ Returning to the original script directory: $ORIGINAL_DIR"
cd "$ORIGINAL_DIR"

echo "ğŸ‰ Kubernetes deployment completed!"